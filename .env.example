# ======================================================
# =               Namwoo Configuration                 =
# ======================================================
# Copy this file to .env and fill in your actual values.
# DO NOT commit your actual .env file to version control.

# --- Flask App Configuration ---
FLASK_APP=run.py
FLASK_ENV=development # Use 'production' for deployment
SECRET_KEY='generate-a-strong-random-key-here' # Generate one: python -c 'import secrets; print(secrets.token_hex(16))'

# --- Logging Configuration ---
LOG_LEVEL=DEBUG # Set log level (DEBUG, INFO, WARNING, ERROR)

# --- PostgreSQL Database Configuration ---
# Example: postgresql://user:password@hostname:port/database_name
# Ensure user has permissions on the database and pgvector extension is enabled
DATABASE_URL='postgresql://namwoo_user:your_strong_db_password@localhost:5432/namwoo_db'

# --- WooCommerce API Configuration ---
WOOCOMMERCE_URL='https://your-store.com' # Your WooCommerce store URL (use https://)
WOOCOMMERCE_KEY='ck_your_woocommerce_key' # Your WooCommerce API key
WOOCOMMERCE_SECRET='cs_your_woocommerce_secret' # Your WooCommerce API secret
WOOCOMMERCE_API_VERSION='wc/v3' # Usually wc/v3
WOOCOMMERCE_TIMEOUT=30 # Timeout in seconds for WooComm API calls

# --- Scheduler settings ---
SYNC_INTERVAL_MINUTES=60 # How often to run the background sync (set to 0 to disable automatic sync)

# ======================================================
# =               LLM Provider Selection               =
# ======================================================
# Choose which LLM service to use: 'openai' or 'google'
LLM_PROVIDER=google

# --- OpenAI API Configuration (Required if LLM_PROVIDER=openai) ---
OPENAI_API_KEY='sk-your-openai-api-key' # Replace with your actual OpenAI API key
OPENAI_EMBEDDING_MODEL='text-embedding-3-small' # Or another model supported by the API version
OPENAI_CHAT_MODEL='gpt-4o-mini' # Or another model like gpt-4
OPENAI_MAX_TOKENS=1024 # Max tokens for OpenAI completion response
EMBEDDING_DIMENSION=1536 # Dimension of the embedding model (text-embedding-3-small is 1536)

# --- Google Gemini API Configuration (Required if LLM_PROVIDER=google) ---
GOOGLE_API_KEY='your-google-api-key-here' # Get from Google AI Studio or GCP
GOOGLE_GEMINI_MODEL='gemini-1.5-flash-latest' # Or gemini-1.5-pro-latest etc.
# GOOGLE_MAX_TOKENS=2048 # Optional: Max output tokens for Gemini response (often higher than OpenAI)

# ======================================================
# =               Support Board Integration            =
# ======================================================
# URL to your SB installation's api.php
SUPPORT_BOARD_API_URL="https://your-supportboard-domain.com/include/api.php"

# Get from SB Admin Area -> Users -> Find Admin User -> Copy Token
SUPPORT_BOARD_API_TOKEN="your_support_board_admin_api_token"

# The User ID of the account that will represent the BOT in Support Board conversations.
# Find this in SB Admin -> Users -> Click the bot user -> See the ID in the URL or profile.
# THIS MUST BE CORRECT for bot echo prevention and history formatting.
SUPPORT_BOARD_BOT_USER_ID="2" # Replace with your actual bot's User ID in SB

# Optional: Secret key you configure in SB Webhook settings for verification
SUPPORT_BOARD_WEBHOOK_SECRET="your_optional_webhook_secret_key"

# ======================================================
# =          WhatsApp Cloud API Configuration          =
# ======================================================
# Required for sending WhatsApp messages directly via Meta API
WHATSAPP_CLOUD_API_TOKEN="EAA...your_permanent_whatsapp_token...ZD" # Replace with your actual System User Permanent Token
WHATSAPP_PHONE_NUMBER_ID="123456789012345" # Replace with your WhatsApp Phone Number ID from Meta App dashboard
WHATSAPP_DEFAULT_COUNTRY_CODE="58" # Fallback country code (e.g., 58 for Venezuela) if phone number in SB lacks it
WHATSAPP_API_VERSION="v19.0" # Default to v19.0 or specify another supported version

# ======================================================
# =        Human Agent Takeover Configuration          =
# ======================================================
# Comma-separated list of User IDs (from Support Board) of your human agents.
# Messages from these users will pause the bot for the specified duration.
SUPPORT_BOARD_AGENT_IDS="1,5,10"   # Replace with YOUR comma-separated agent User IDs from Support Board

# Duration in minutes to pause the bot in a conversation after a human agent replies.
HUMAN_TAKEOVER_PAUSE_MINUTES="30" # Default pause duration in minutes

# ======================================================
# =           Application Specific Settings            =
# ======================================================
# Max number of user/assistant message pairs to include in the history sent to the LLM
MAX_HISTORY_MESSAGES=16

# Default number of products to return from the local product search function
PRODUCT_SEARCH_LIMIT=10 # Recommended: 10 or more to allow for filtering

# --- Deprecated / Informational (Not directly used by primary logic anymore) ---
# SUPPORT_BOARD_SENDER_USER_ID="1" # Was previously used to control WA sender via SB API, direct WA API is now preferred. Kept for reference.